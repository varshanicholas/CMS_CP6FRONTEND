

<div class="container">
  <h3>APPOINTMENT BOOKING</h3>

  <hr>

  <!--Template driven from form-->
  <form name="appointmentForm" #appForm="ngForm" autocomplete="off" (ngSubmit)="onSubmit(appForm)">

    <div class="form-group">
      <input type="hidden" readonly name="AppontmentId"
        [(ngModel)]="patientregService.formAppointmentData.AppointmentId" />

    </div>

    <!-- <div>
      <label for="patientId">Patient ID</label>
      <input
        type="text"
        id="patientId"
        name="patientId"
        [value]="patientId"
        readonly
      />
    </div> -->
    

    
    <div class="form-group">
      <label for="patientName">Patient Name</label>
      <input type="text" class="form-control"  id="patientName"
      name="patientName"
      [value]="patientName"
      readonly readonly />
    </div>

    <div class="form-group">
      <label>Department:</label>
      <select name="Department" id="Department" #Department="ngModel"
        [(ngModel)]="patientregService.formAppointmentData.DepartmentId" class="form-control" required
        (change)="onDepartmentChange($event)">
        <option value="0" selected disabled> ---Select Department---</option>
        <option *ngFor="let dept of patientregService.department" [value]="dept.DepartmentId">
          {{dept.DepartmentName}}
        </option>
      </select>
    </div>


    <!-- <div class="form-group">
      <label>Doctor:</label>
      <select name="DoctorName" id="DoctorName" [(ngModel)]="selectedDoctorId"
        (change)="onDoctorChange(selectedDoctorId)" class="form-control" required>
        <option value="0" disabled selected>---Select Doctor---</option>
        <option *ngFor="let doctor of doctors" [value]="doctor.DoctorId">
          {{ doctor.Staff.StaffName || 'Unknown' }}

        </option>
      </select>
    </div> -->

    <div class="form-group">
      <label>Doctor:</label>
      <select
        name="DoctorName"
        id="DoctorName"
        [(ngModel)]="selectedDoctorId"
        (change)="onDoctorChange($event)"
        class="form-control"
        required
      >
        <option value="0" disabled selected>---Select Doctor---</option>
        <option *ngFor="let doctor of doctors" [value]="doctor.DoctorId">
          {{ doctor.Staff.StaffName || 'Unknown' }}
        </option>
      </select>
    </div>
    

<!-- Consultation Fee -->
<div class="form-group">
  <label for="fee">Consultation Fee:</label>
  <input
    type="text"
    id="fee"
    readonly
    class="form-control"
    [value]="consultationFee || 'Unknown'"
  />
</div>

 
    <!--  
  <div class="form-group">
    <label>Doctor:</label>
    <select name="DoctorName" id="DoctorName" [(ngModel)]="selectedDoctorId" (change)="onDoctorChange(selectedDoctorId)" class="form-control" required>
      <option value="0" selected disabled>---Select Doctor---</option>
      <option *ngFor="let doctor of doctors" [value]="doctor.DoctorId">
        {{ doctor.Staff.StaffName }}
      </option>
    </select>
  </div> -->

    <div class="form-group">
      <label>Appointmnet Date:</label>
      <input type="date" name="AppointmentDate" #AppointmentDate="ngModel" class="form-control validation-error"
        [(ngModel)]="patientregService.formAppointmentData.AppointmentDate" class="form-control"
        placeholder="Enter the Appointment date " required
        [ngClass]="{'is-invalid': AppointmentDate.touched && AppointmentDate.invalid}" />
      <!--touched : keyboard touch-cursor point-while we type-->

      <div class="validation-error" *ngIf="AppointmentDate.touched && AppointmentDate.invalid">
        <div *ngIf="AppointmentDate.errors?.['required']">
          Appointmnet Date is invalid or required!
        </div>
      </div>
    </div>




    <div class="form-group">
      <label>Registartion Fees:</label>
      <input type="text" class="form-control" [value]=200 readonly />
    </div>



    <div class="form-group">
      <label>Token Number</label>
      <input type="text" class="form-control"   />
    </div>

 <!-- Submit -->
 <div class="form-group">
  <button type="submit" class="btn btn-lg btn-primary form-control" [disabled]="!appForm.valid">
      Book Appointment
  </button>
</div>

<!-- Error After submission -->
<div *ngIf="errorMessage" class="error-message validation-error">
  {{errorMessage}}
</div>


  </form>

</div>